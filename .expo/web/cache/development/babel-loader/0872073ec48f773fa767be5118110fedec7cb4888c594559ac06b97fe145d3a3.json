{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect } from 'react';\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Checkbox } from 'react-native-paper';\nimport useDeviceManagement from \"../hooks/useDeviceManagement\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar styles = StyleSheet.create({\n  centeredView: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 22\n  },\n  modalView: {\n    margin: 20,\n    backgroundColor: '#F7F6FA',\n    borderRadius: 20,\n    padding: 35,\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5\n  },\n  userListItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 10\n  }\n});\nexport default function DeviceActionModal(_ref) {\n  var isVisible = _ref.isVisible,\n    onClose = _ref.onClose,\n    device = _ref.device,\n    users = _ref.users;\n  var _useDeviceManagement = useDeviceManagement(),\n    assignDeviceToUser = _useDeviceManagement.assignDeviceToUser,\n    unassignDeviceFromUser = _useDeviceManagement.unassignDeviceFromUser,\n    loadData = _useDeviceManagement.loadData;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    selectedUsers = _useState2[0],\n    setSelectedUsers = _useState2[1];\n  var _useState3 = useState({\n      room: (device == null ? void 0 : device.room) || ''\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    localDeviceData = _useState4[0],\n    setLocalDeviceData = _useState4[1];\n  useEffect(function () {\n    setSelectedUsers((device == null ? void 0 : device.assignedUsers) || []);\n  }, [device]);\n  var handleToggleUser = function () {\n    var _ref2 = _asyncToGenerator(function* (userId) {\n      if (selectedUsers.includes(userId)) {\n        yield unassignDeviceFromUser(device._id, userId);\n      } else {\n        yield assignDeviceToUser(device._id, userId);\n      }\n      yield loadData();\n      setSelectedUsers(function (prev) {\n        return prev.includes(userId) ? prev.filter(function (id) {\n          return id !== userId;\n        }) : [].concat(_toConsumableArray(prev), [userId]);\n      });\n    });\n    return function handleToggleUser(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsx(Modal, {\n    visible: isVisible,\n    animationType: \"slide\",\n    transparent: true,\n    onRequestClose: onClose,\n    children: _jsx(View, {\n      style: styles.centeredView,\n      children: _jsxs(View, {\n        style: styles.modalView,\n        children: [_jsx(TextInput, {\n          value: localDeviceData.room,\n          onChangeText: function onChangeText(text) {\n            return setLocalDeviceData(_objectSpread(_objectSpread({}, localDeviceData), {}, {\n              room: text\n            }));\n          }\n        }), _jsx(ScrollView, {\n          children: users.map(function (user) {\n            return _jsxs(View, {\n              style: styles.userListItem,\n              children: [_jsx(Text, {\n                children: `${user.firstName} ${user.lastName}`\n              }), _jsx(Checkbox, {\n                status: selectedUsers.includes(user._id) ? 'checked' : 'unchecked',\n                onPress: function onPress() {\n                  return handleToggleUser(user._id);\n                }\n              })]\n            }, user._id);\n          })\n        }), _jsx(Button, {\n          title: \"Close\",\n          onPress: onClose\n        })]\n      })\n    })\n  });\n}","map":{"version":3,"names":["React","useState","useEffect","Modal","View","Text","Button","TouchableOpacity","StyleSheet","TextInput","ScrollView","Checkbox","useDeviceManagement","jsx","_jsx","jsxs","_jsxs","styles","create","centeredView","flex","justifyContent","alignItems","marginTop","modalView","margin","backgroundColor","borderRadius","padding","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","userListItem","flexDirection","marginBottom","DeviceActionModal","_ref","isVisible","onClose","device","users","_useDeviceManagement","assignDeviceToUser","unassignDeviceFromUser","loadData","_useState","_useState2","_slicedToArray","selectedUsers","setSelectedUsers","_useState3","room","_useState4","localDeviceData","setLocalDeviceData","assignedUsers","handleToggleUser","_ref2","_asyncToGenerator","userId","includes","_id","prev","filter","id","concat","_toConsumableArray","_x","apply","arguments","visible","animationType","transparent","onRequestClose","children","style","value","onChangeText","text","_objectSpread","map","user","firstName","lastName","status","onPress","title"],"sources":["C:/Users/lofli/Downloads/integradora-misto/views/adminDashboard/components/DeviceActionModal.js"],"sourcesContent":["// DeviceActionModal.js\nimport React, { useState, useEffect } from 'react';\nimport { Modal, View, Text, Button, TouchableOpacity, StyleSheet, TextInput, ScrollView } from 'react-native';\nimport { Checkbox } from 'react-native-paper';\nimport useDeviceManagement from '../hooks/useDeviceManagement';\n\n// Imagina que este componente toma algunas props como isOpen, onClose, device, y una para manejar las asignaciones y desasignaciones.\nconst styles = StyleSheet.create({\n  centeredView: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 22,\n  },\n  modalView: {\n    margin: 20,\n    backgroundColor: '#F7F6FA',\n    borderRadius: 20,\n    padding: 35,\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5,\n  },\n  userListItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 10,\n  },\n  // Añade más estilos según sea necesario\n});\n  \n  export default function DeviceActionModal({\n    isVisible,\n    onClose,\n    device,\n    users,\n  }) {\n    // Uso correcto del hook dentro de un componente funcional\n    const { assignDeviceToUser, unassignDeviceFromUser, loadData } = useDeviceManagement();\n\n  \n    // Estado para manejar los usuarios seleccionados\n    const [selectedUsers, setSelectedUsers] = useState([]);\n    const [localDeviceData, setLocalDeviceData] = useState({ room: device?.room || '' });\n  \n    useEffect(() => {\n      // Actualiza el estado cuando el dispositivo cambia\n      setSelectedUsers(device?.assignedUsers || []);\n    }, [device]);\n  \n    const handleToggleUser = async (userId) => {\n      if (selectedUsers.includes(userId)) {\n        await unassignDeviceFromUser(device._id, userId);\n      } else {\n        await assignDeviceToUser(device._id, userId);\n      }\n      await loadData();\n      setSelectedUsers((prev) =>\n        prev.includes(userId) ? prev.filter((id) => id !== userId) : [...prev, userId]\n      );\n    };\n  \n  return (\n    <Modal\n      visible={isVisible}\n      animationType=\"slide\"\n      transparent\n      onRequestClose={onClose}\n    >\n      <View style={styles.centeredView}>\n        <View style={styles.modalView}>\n          <TextInput\n            value={localDeviceData.room}\n            onChangeText={(text) => setLocalDeviceData({...localDeviceData, room: text})}\n            // Otros campos de texto según sea necesario\n          />\n          <ScrollView>\n            {users.map((user) => (\n              <View key={user._id} style={styles.userListItem}>\n                <Text>{`${user.firstName} ${user.lastName}`}</Text>\n                <Checkbox\n                  status={selectedUsers.includes(user._id) ? 'checked' : 'unchecked'}\n                  onPress={() => handleToggleUser(user._id)}\n                />\n              </View>\n            ))}\n          </ScrollView>\n          <Button title=\"Close\" onPress={onClose} />\n        </View>\n      </View>\n    </Modal>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}