{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { MaterialIcons } from '@expo/vector-icons';\nimport UserActionModal from \"./UserActionModal\";\nimport useDeviceManagement from \"../hooks/useDeviceManagement\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar UserList = function UserList() {\n  var _useDeviceManagement = useDeviceManagement(),\n    users = _useDeviceManagement.users,\n    removeUser = _useDeviceManagement.removeUser,\n    isLoading = _useDeviceManagement.isLoading,\n    loadData = _useDeviceManagement.loadData,\n    assignDeviceToUser = _useDeviceManagement.assignDeviceToUser,\n    unassignDeviceFromUser = _useDeviceManagement.unassignDeviceFromUser;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    userActionModalVisible = _useState2[0],\n    setUserActionModalVisible = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    selectedUser = _useState4[0],\n    setSelectedUser = _useState4[1];\n  var styles = StyleSheet.create({\n    userListItem: {\n      backgroundColor: '#F7F6FA',\n      borderRadius: 10,\n      padding: 15,\n      marginVertical: 5,\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      shadowColor: '#000',\n      shadowOffset: {\n        width: 0,\n        height: 1\n      },\n      shadowOpacity: 0.22,\n      shadowRadius: 2.22,\n      elevation: 3\n    },\n    userListTextName: {\n      fontSize: 16,\n      fontWeight: 'bold'\n    },\n    userListTextEmail: {\n      fontSize: 14,\n      color: '#666',\n      marginTop: 2\n    },\n    userListContainer: {\n      flexGrow: 1,\n      justifyContent: 'center'\n    }\n  });\n  var confirmRemoveUser = function confirmRemoveUser(userEmail) {\n    Alert.alert(\"Eliminar Usuario\", `¿Estás seguro de que quieres eliminar a ${userEmail}?`, [{\n      text: \"Cancelar\",\n      style: \"cancel\"\n    }, {\n      text: \"Eliminar\",\n      onPress: function () {\n        var _onPress = _asyncToGenerator(function* () {\n          yield removeUser(userEmail);\n          yield loadData();\n        });\n        function onPress() {\n          return _onPress.apply(this, arguments);\n        }\n        return onPress;\n      }(),\n      style: \"destructive\"\n    }], {\n      cancelable: true\n    });\n  };\n  var openUserActionModal = function openUserActionModal(user) {\n    setSelectedUser(user);\n    setUserActionModalVisible(true);\n  };\n  var handleAssignDevices = function () {\n    var _ref = _asyncToGenerator(function* (deviceId, userId) {\n      yield assignDeviceToUser(deviceId, userId);\n      yield loadData();\n    });\n    return function handleAssignDevices(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var handleUnassignDevices = function () {\n    var _ref2 = _asyncToGenerator(function* (deviceId, userId) {\n      yield unassignDeviceFromUser(deviceId, userId);\n      yield loadData();\n    });\n    return function handleUnassignDevices(_x3, _x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsxs(_Fragment, {\n    children: [_jsx(FlatList, {\n      data: users,\n      keyExtractor: function keyExtractor(user) {\n        return user._id.toString();\n      },\n      renderItem: function renderItem(_ref3) {\n        var item = _ref3.item;\n        return _jsxs(View, {\n          style: styles.userListItem,\n          children: [_jsx(Text, {\n            style: styles.userListTextName,\n            children: `${item.firstName} ${item.lastName}`\n          }), _jsx(Text, {\n            style: styles.userListTextEmail,\n            children: item.email\n          }), _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return confirmRemoveUser(item.email);\n            },\n            children: _jsx(MaterialIcons, {\n              name: \"delete\",\n              size: 18,\n              color: \"black\"\n            })\n          }), _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return openUserActionModal(item);\n            },\n            children: _jsx(MaterialIcons, {\n              name: \"settings\",\n              size: 18,\n              color: \"black\"\n            })\n          })]\n        });\n      },\n      horizontal: true,\n      showsHorizontalScrollIndicator: false,\n      contentContainerStyle: styles.userListContainer\n    }), selectedUser && _jsx(UserActionModal, {\n      isVisible: userActionModalVisible,\n      onClose: function onClose() {\n        return setUserActionModalVisible(false);\n      },\n      user: selectedUser,\n      onAssignDevices: handleAssignDevices,\n      onUnassignDevices: handleUnassignDevices\n    })]\n  });\n};\nexport default UserList;","map":{"version":3,"names":["React","useState","View","Text","TouchableOpacity","FlatList","Alert","StyleSheet","MaterialIcons","UserActionModal","useDeviceManagement","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserList","_useDeviceManagement","users","removeUser","isLoading","loadData","assignDeviceToUser","unassignDeviceFromUser","_useState","_useState2","_slicedToArray","userActionModalVisible","setUserActionModalVisible","_useState3","_useState4","selectedUser","setSelectedUser","styles","create","userListItem","backgroundColor","borderRadius","padding","marginVertical","flexDirection","alignItems","justifyContent","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","userListTextName","fontSize","fontWeight","userListTextEmail","color","marginTop","userListContainer","flexGrow","confirmRemoveUser","userEmail","alert","text","style","onPress","_onPress","_asyncToGenerator","apply","arguments","cancelable","openUserActionModal","user","handleAssignDevices","_ref","deviceId","userId","_x","_x2","handleUnassignDevices","_ref2","_x3","_x4","children","data","keyExtractor","_id","toString","renderItem","_ref3","item","firstName","lastName","email","name","size","horizontal","showsHorizontalScrollIndicator","contentContainerStyle","isVisible","onClose","onAssignDevices","onUnassignDevices"],"sources":["C:/Users/lofli/Downloads/integradora-misto/views/adminDashboard/components/UserList.js"],"sourcesContent":["// UserList.js\nimport React, { useState } from 'react';\nimport { View, Text, TouchableOpacity, FlatList, Alert, StyleSheet } from 'react-native';\nimport { MaterialIcons } from '@expo/vector-icons';\nimport UserActionModal from './UserActionModal'; // Asumiendo que este modal ya está creado\nimport useDeviceManagement from '../hooks/useDeviceManagement'; // Importamos nuestro hook\n\nconst UserList = () => {\n  const {\n    users,\n    removeUser,\n    isLoading,\n    loadData,\n    assignDeviceToUser,\n    unassignDeviceFromUser,\n  } = useDeviceManagement();\n\n  const [userActionModalVisible, setUserActionModalVisible] = useState(false);\n  const [selectedUser, setSelectedUser] = useState(null);\n\n  // Estilos aquí o en un archivo externo importado\n  const styles = StyleSheet.create({\n    userListItem: {\n      backgroundColor: '#F7F6FA',\n      borderRadius: 10,\n      padding: 15,\n      marginVertical: 5,\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      shadowColor: '#000',\n      shadowOffset: { width: 0, height: 1 },\n      shadowOpacity: 0.22,\n      shadowRadius: 2.22,\n      elevation: 3,\n    },\n    userListTextName: {\n      fontSize: 16,\n      fontWeight: 'bold',\n    },\n    userListTextEmail: {\n      fontSize: 14,\n      color: '#666',\n      marginTop: 2,\n    },\n    userListContainer: {\n      flexGrow: 1,\n      justifyContent: 'center',\n    },\n  });\n  \n\n  const confirmRemoveUser = (userEmail) => {\n    Alert.alert(\n      \"Eliminar Usuario\",\n      `¿Estás seguro de que quieres eliminar a ${userEmail}?`,\n      [\n        {\n          text: \"Cancelar\",\n          style: \"cancel\"\n        },\n        {\n          text: \"Eliminar\",\n          onPress: async () => {\n            await removeUser(userEmail);\n            await loadData(); // Recargamos la información\n          },\n          style: \"destructive\"\n        }\n      ],\n      { cancelable: true }\n    );\n  };\n\n  const openUserActionModal = (user) => {\n    setSelectedUser(user);\n    setUserActionModalVisible(true);\n  };\n\n  const handleAssignDevices = async (deviceId, userId) => {\n    await assignDeviceToUser(deviceId, userId);\n    await loadData(); // Recargamos los datos después de la asignación\n  };\n\n  const handleUnassignDevices = async (deviceId, userId) => {\n    await unassignDeviceFromUser(deviceId, userId);\n    await loadData(); // Recargamos los datos después de la desasignación\n  };\n\n  return (\n    <>\n      <FlatList\n        data={users}\n        keyExtractor={(user) => user._id.toString()}\n        renderItem={({ item }) => (\n          <View style={styles.userListItem}>\n            {/* Contenido del item de usuario */}\n            <Text style={styles.userListTextName}>{`${item.firstName} ${item.lastName}`}</Text>\n            <Text style={styles.userListTextEmail}>{item.email}</Text>\n            \n            <TouchableOpacity onPress={() => confirmRemoveUser(item.email)}>\n              <MaterialIcons name=\"delete\" size={18} color=\"black\" />\n            </TouchableOpacity>\n            <TouchableOpacity onPress={() => openUserActionModal(item)}>\n              <MaterialIcons name=\"settings\" size={18} color=\"black\" />\n            </TouchableOpacity>\n          </View>\n        )}\n        // Otras propiedades del FlatList\n        horizontal\n        showsHorizontalScrollIndicator={false}\n        contentContainerStyle={styles.userListContainer}\n      />\n      {selectedUser && (\n        <UserActionModal\n          isVisible={userActionModalVisible}\n          onClose={() => setUserActionModalVisible(false)}\n          user={selectedUser}\n          onAssignDevices={handleAssignDevices}\n          onUnassignDevices={handleUnassignDevices}\n        />\n      )}\n    </>\n  );\n};\n\nexport default UserList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}