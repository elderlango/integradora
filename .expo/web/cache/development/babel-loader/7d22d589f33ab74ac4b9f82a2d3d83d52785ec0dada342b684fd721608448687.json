{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect, useContext } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport BackButton from \"../../components/backButtonc\";\nimport { ThemeContext } from \"../../components/theme/themeManager\";\nimport sesionExpiredStyle from \"./sesionExpiredStyle\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar SesionExpired = function SesionExpired(_ref) {\n  var navigation = _ref.navigation;\n  var _useContext = useContext(ThemeContext),\n    theme = _useContext.theme;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    userData = _useState2[0],\n    setUserData = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  useEffect(function () {\n    var fetchProfileData = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        var userToken = yield AsyncStorage.getItem('userToken');\n        var userId = yield AsyncStorage.getItem('userId');\n        var endpoint = `http://${global.ipDireccion}:3000/api/admins/${userId}`;\n        try {\n          var response = yield fetch(endpoint, {\n            method: 'GET',\n            headers: {\n              'Authorization': `Bearer ${userToken}`\n            }\n          });\n          if (response.ok) {\n            var json = yield response.json();\n            setUserData(json);\n          } else {\n            var errorMessage = yield response.text();\n            throw new Error(errorMessage || \"Error al obtener datos del perfil.\");\n          }\n          if (userData) {\n            navigation.navigate('Login');\n          }\n        } catch (error) {\n          Alert.alert(\"Error\", error.message || \"Ocurrió un error inesperado.\");\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function fetchProfileData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    fetchProfileData();\n  }, [navigation]);\n  if (loading) {\n    return _jsx(ActivityIndicator, {\n      size: \"large\",\n      color: \"#000\"\n    });\n  }\n  var dark = '../../assets/images/tile_background4.png';\n  var light = '../../assets/images/tile_background9.png';\n  return _jsx(View, {\n    style: _objectSpread(_objectSpread({}, sesionExpiredStyle.backgroundImage), sesionExpiredStyle.container),\n    children: _jsxs(ImageBackground, {\n      source: theme === 'light' ? require(light) : require(dark),\n      style: _objectSpread(_objectSpread({}, sesionExpiredStyle.backgroundImage), sesionExpiredStyle.container),\n      children: [_jsx(BackButton, {\n        navigation: navigation\n      }), _jsxs(Text, {\n        style: theme === 'light' ? sesionExpiredStyle.sesionExpired : sesionExpiredStyle.sesionExpiredDark,\n        children: [\"No se pudieron obtener los datos del usuario. Porfavor\", _jsx(Text, {\n          style: {\n            fontWeight: 'bold',\n            fontSize: 25\n          },\n          children: \" Intenta nuevamente \"\n        }), \" o\", _jsx(Text, {\n          style: {\n            fontWeight: 'bold',\n            fontSize: 25\n          },\n          children: \" inicia sesion\"\n        })]\n      }), _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return navigation.navigate('Login');\n        },\n        style: sesionExpiredStyle.registerButton,\n        children: _jsx(Text, {\n          style: sesionExpiredStyle.buttonTextDemo,\n          children: \"Inicia Sesi\\xF3n\"\n        })\n      })]\n    })\n  });\n};\nexport default SesionExpired;","map":{"version":3,"names":["React","useState","useEffect","useContext","View","Text","TouchableOpacity","ImageBackground","ActivityIndicator","Alert","BackButton","ThemeContext","sesionExpiredStyle","AsyncStorage","jsx","_jsx","jsxs","_jsxs","SesionExpired","_ref","navigation","_useContext","theme","_useState","_useState2","_slicedToArray","userData","setUserData","_useState3","_useState4","loading","setLoading","fetchProfileData","_ref2","_asyncToGenerator","userToken","getItem","userId","endpoint","global","ipDireccion","response","fetch","method","headers","ok","json","errorMessage","text","Error","navigate","error","alert","message","apply","arguments","size","color","dark","light","style","_objectSpread","backgroundImage","container","children","source","require","sesionExpired","sesionExpiredDark","fontWeight","fontSize","onPress","registerButton","buttonTextDemo"],"sources":["C:/Users/lofli/Downloads/integradora-misto/views/SesionExpired/sesionExpired.js"],"sourcesContent":["import React, { useState, useEffect, useContext} from 'react';\nimport { View, Text, TouchableOpacity, ImageBackground, ActivityIndicator, Alert } from 'react-native';\nimport BackButton from '../../components/backButtonc';\nimport { ThemeContext } from \"../../components/theme/themeManager\";\nimport sesionExpiredStyle from './sesionExpiredStyle';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst SesionExpired = ({ navigation }) => {   \n  const { theme } = useContext(ThemeContext);\n\n    const [userData, setUserData] = useState(null);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const fetchProfileData = async () => {\n            const userToken = await AsyncStorage.getItem('userToken');\n            const userId = await AsyncStorage.getItem('userId');\n  \n          const endpoint = `http://${global.ipDireccion}:3000/api/admins/${userId}`;\n\n          try {\n            const response = await fetch(endpoint, {\n                method: 'GET',\n                headers: {\n                    'Authorization': `Bearer ${userToken}`, \n                },\n            });\n\n            if (response.ok) {\n                const json = await response.json();\n                setUserData(json);\n            } else {\n                const errorMessage = await response.text();\n                throw new Error(errorMessage || \"Error al obtener datos del perfil.\");\n            }\n\n            if (userData) {\n              navigation.navigate('Login');\n            }\n        } catch (error) {\n            Alert.alert(\"Error\", error.message || \"Ocurrió un error inesperado.\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n        fetchProfileData();\n    }, [navigation]);\n\n    if (loading) {\n        return <ActivityIndicator size=\"large\" color=\"#000\"/>;\n    }\n\n\n  const dark ='../../assets/images/tile_background4.png';\n  const light ='../../assets/images/tile_background9.png';\n\n      return (\n            <View style={{\n              ...(sesionExpiredStyle.backgroundImage),\n              ...(sesionExpiredStyle.container),\n            }}>\n              <ImageBackground source={theme === 'light' ? require(light) : require(dark)} \n             style={{\n              ...(sesionExpiredStyle.backgroundImage),\n              ...(sesionExpiredStyle.container),\n            }}>  \n                <BackButton navigation={navigation}/>\n                <Text style={theme === 'light' ? sesionExpiredStyle.sesionExpired : sesionExpiredStyle.sesionExpiredDark}>\n                    No se pudieron obtener los datos del usuario. Porfavor \n                    <Text style={{ fontWeight: 'bold', fontSize: 25 }}> Intenta nuevamente </Text> o \n                    <Text style={{ fontWeight: 'bold', fontSize: 25 }}> inicia sesion</Text> \n                </Text>\n                <TouchableOpacity onPress={() => navigation.navigate('Login')} style={sesionExpiredStyle.registerButton}>\n              <Text style={sesionExpiredStyle.buttonTextDemo} >Inicia Sesión</Text>\n            </TouchableOpacity>\n            </ImageBackground>\n\n            </View>\n      );\n    };\n\nexport default SesionExpired;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}