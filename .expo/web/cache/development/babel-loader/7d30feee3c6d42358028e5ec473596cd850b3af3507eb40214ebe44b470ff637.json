{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { MaterialIcons } from '@expo/vector-icons';\nimport useDeviceManagement from \"../hooks/useDeviceManagement\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar DeviceList = function DeviceList() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    devices = _useState2[0],\n    setDevices = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    selectedDevice = _useState4[0],\n    setSelectedDevice = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var devicesSample = [{\n    _id: '1',\n    room: 'Sala de estar'\n  }, {\n    _id: '2',\n    room: 'Cocina'\n  }, {\n    _id: '3',\n    room: 'Dormitorio principal'\n  }, {\n    _id: '4',\n    room: 'Oficina en casa'\n  }];\n  useEffect(function () {\n    setDevices(devicesSample);\n    setError(null);\n  }, []);\n  var dissociateDevice = function () {\n    var _ref = _asyncToGenerator(function* (deviceId) {\n      console.log('Dissociating device with ID:', deviceId);\n      var isSuccess = true;\n      return {\n        ok: isSuccess,\n        message: isSuccess ? null : 'No se pudo desasociar el dispositivo'\n      };\n    });\n    return function dissociateDevice(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var loadData = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      setDevices(devicesSample);\n    });\n    return function loadData() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleDissociate = function handleDissociate(deviceId) {\n    Alert.alert(\"Desasociar Dispositivo\", \"¿Estás seguro de que quieres desasociar este dispositivo?\", [{\n      text: \"Cancelar\",\n      style: \"cancel\"\n    }, {\n      text: \"Desasociar\",\n      onPress: function () {\n        var _onPress = _asyncToGenerator(function* () {\n          setSelectedDevice(deviceId);\n          var response = yield dissociateDevice(deviceId);\n          if (response.ok) {\n            loadData();\n          } else {\n            Alert.alert(\"Error\", response.message || \"No se pudo desasociar el dispositivo\");\n          }\n        });\n        function onPress() {\n          return _onPress.apply(this, arguments);\n        }\n        return onPress;\n      }(),\n      style: \"destructive\"\n    }]);\n  };\n  return _jsxs(_Fragment, {\n    children: [error && _jsx(Text, {\n      style: styles.errorText,\n      children: error\n    }), _jsx(View, {\n      style: styles.container,\n      children: _jsx(FlatList, {\n        data: devices,\n        keyExtractor: function keyExtractor(item) {\n          return item._id.toString();\n        },\n        renderItem: function renderItem(_ref3) {\n          var item = _ref3.item;\n          return _jsxs(View, {\n            style: styles.deviceListItem,\n            children: [_jsx(Text, {\n              style: styles.deviceText,\n              children: item.room\n            }), _jsx(TouchableOpacity, {\n              onPress: function onPress() {\n                return handleDissociate(item._id);\n              },\n              children: _jsx(MaterialIcons, {\n                name: \"delete\",\n                size: 18\n              })\n            })]\n          });\n        },\n        horizontal: true,\n        showsHorizontalScrollIndicator: false,\n        contentContainerStyle: styles.userListContainer\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingHorizontal: 10,\n    paddingTop: 20\n  },\n  deviceListItem: {\n    backgroundColor: '#ffffff',\n    padding: 15,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginVertical: 5,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 1\n    },\n    shadowOpacity: 0.22,\n    shadowRadius: 2.22,\n    elevation: 3\n  },\n  deviceText: {\n    fontSize: 16,\n    color: '#333',\n    flex: 1,\n    marginLeft: 10,\n    fontWeight: '500'\n  },\n  iconButton: {\n    padding: 8,\n    borderRadius: 50,\n    backgroundColor: '#f0f0f0',\n    marginLeft: 10\n  },\n  icon: {\n    marginLeft: 10\n  },\n  userListContainer: {\n    flexGrow: 1,\n    justifyContent: 'center'\n  },\n  errorText: {\n    color: 'red',\n    textAlign: 'center',\n    marginTop: 10\n  }\n});\nexport default DeviceList;","map":{"version":3,"names":["React","useState","useEffect","FlatList","TouchableOpacity","Text","View","StyleSheet","Alert","MaterialIcons","useDeviceManagement","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DeviceList","_useState","_useState2","_slicedToArray","devices","setDevices","_useState3","_useState4","selectedDevice","setSelectedDevice","_useState5","_useState6","error","setError","devicesSample","_id","room","dissociateDevice","_ref","_asyncToGenerator","deviceId","console","log","isSuccess","ok","message","_x","apply","arguments","loadData","_ref2","handleDissociate","alert","text","style","onPress","_onPress","response","children","styles","errorText","container","data","keyExtractor","item","toString","renderItem","_ref3","deviceListItem","deviceText","name","size","horizontal","showsHorizontalScrollIndicator","contentContainerStyle","userListContainer","create","flex","paddingHorizontal","paddingTop","backgroundColor","padding","borderRadius","flexDirection","alignItems","justifyContent","marginVertical","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","fontSize","color","marginLeft","fontWeight","iconButton","icon","flexGrow","textAlign","marginTop"],"sources":["C:/Users/lofli/Downloads/integradora-misto/views/userDashboard/components/DeviceList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { FlatList, TouchableOpacity, Text, View, StyleSheet, Alert } from 'react-native';\nimport { MaterialIcons } from '@expo/vector-icons';\nimport useDeviceManagement from '../hooks/useDeviceManagement'; // Asegúrate de que la ruta sea correcta\n\nconst DeviceList = () => {\n  /* const {\n    devices,\n    loadData,\n    setSelectedDevice,\n    dissociateDevice, // Asegúrate de que esta línea esté agregada para obtener la función del hook\n    error, // Asegúrate de importar el estado de error del hook\n  } = useDeviceManagement(); */\n\n  const [devices, setDevices] = useState([]);\n  const [selectedDevice, setSelectedDevice] = useState(null);\n  const [error, setError] = useState(null);\n\n  const devicesSample = [\n    {\n      _id: '1',\n      room: 'Sala de estar',\n    },\n    {\n      _id: '2',\n      room: 'Cocina',\n    },\n    {\n      _id: '3',\n      room: 'Dormitorio principal',\n    },\n    {\n      _id: '4',\n      room: 'Oficina en casa',\n    },\n  ];\n  \n\n  useEffect(() => {\n    // Simulando la carga de datos\n    setDevices(devicesSample);  // Utiliza el arreglo de muestra\n    setError(null);\n    /* loadData(); // Carga los dispositivos cuando el componente se monta */\n  }, []);\n\n  const dissociateDevice = async (deviceId) => {\n    console.log('Dissociating device with ID:', deviceId);\n    // Simular éxito o error en la operación\n    const isSuccess = true; // Cambiar a false para simular un error\n    return { ok: isSuccess, message: isSuccess ? null : 'No se pudo desasociar el dispositivo' };\n  };\n\n  const loadData = async () => {\n    // Simular recarga de datos\n    setDevices(devicesSample);\n  };\n\n  const handleDissociate = (deviceId) => {\n    Alert.alert(\n      \"Desasociar Dispositivo\",\n      \"¿Estás seguro de que quieres desasociar este dispositivo?\",\n      [\n        { text: \"Cancelar\", style: \"cancel\" },\n        {\n          text: \"Desasociar\",\n          onPress: async () => {\n            setSelectedDevice(deviceId); // Guarda el dispositivo actual seleccionado\n            const response = await dissociateDevice(deviceId); // Llama a la función para desasociar el dispositivo\n            if (response.ok) {\n              loadData(); // Recarga los dispositivos si la desasociación fue exitosa\n            } else {\n              Alert.alert(\"Error\", response.message || \"No se pudo desasociar el dispositivo\");\n            }\n          },\n          style: \"destructive\"\n        },\n      ],\n    );\n  };\n\n  return (\n    <>\n      {error && <Text style={styles.errorText}>{error}</Text>}\n      <View style={styles.container}>\n        <FlatList\n          data={devices}\n          keyExtractor={(item) => item._id.toString()}\n          renderItem={({ item }) => (\n            <View style={styles.deviceListItem}>\n              <Text style={styles.deviceText}>{item.room}</Text>\n              <TouchableOpacity onPress={() => handleDissociate(item._id)}>\n                <MaterialIcons name=\"delete\" size={18} />\n              </TouchableOpacity>\n            </View>\n          )}\n          horizontal\n          showsHorizontalScrollIndicator={false}\n          contentContainerStyle={styles.userListContainer}\n        />\n      </View>\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingHorizontal: 10,\n    paddingTop: 20,\n  },\n  deviceListItem: {\n    backgroundColor: '#ffffff',\n    padding: 15,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginVertical: 5,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.22,\n    shadowRadius: 2.22,\n    elevation: 3,\n  },\n  deviceText: {\n    fontSize: 16,\n    color: '#333',\n    flex: 1, // Asegura que el texto se ajuste dentro del contenedor\n    marginLeft: 10, // Añade un pequeño margen a la izquierda del texto\n    fontWeight: '500',\n  },\n  iconButton: {\n    padding: 8,\n    borderRadius: 50,\n    backgroundColor: '#f0f0f0', // Un ligero fondo para destacar el área táctil\n    marginLeft: 10, // Espaciado entre iconos\n  },\n  icon: {\n    marginLeft: 10,\n  },\n  userListContainer: {\n    flexGrow: 1,\n    justifyContent: 'center',\n  },\n  errorText: {\n    color: 'red',\n    textAlign: 'center',\n    marginTop: 10,\n  },\n});\n\nexport default DeviceList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}